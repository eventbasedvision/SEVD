# SEVD: Synthetic Event-based Vision Dataset for Ego and Fixed Traffic Perception

# CARLA Data Generation Pipeline

## Introduction

SEVD is a synthetic dataset sourced from CARLA, offering multi-view ego and fixed perception data captured by dynamic vision sensors. Data sequences encompass diverse lighting, weather conditions with domain shifts, and scenes featuring various object classes. Leveraging the CARLA simulator's robust data generation pipeline, traffic data is recorded across varied scenes, illumination, and traffic densities. Each data generation iteration initializes the simulation with custom settings, generating sequences under discrete environmental weather conditions. Additionally, sequences with continuously shifting conditions are generated by interpolating states between initial and final frames. Synchronous mode operation ensures precise sensor synchronization with a time-step of 0.1 seconds. Post-simulation, CARLA's bounding box API is employed to generate annotations in 2D and 3D bounding box formats, including COCO, Pascal VOC, and KITTI, alongside annotations for optical flow and dense depth.

### Features

- Generation of data sequences under discrete environmental weather conditions.
- Generation of sequences with continuously shifting conditions.
- Synchronous operation mode with a time-step of 0.1 seconds.
- Annotation generation in 2D and 3D bounding box formats.
- Alongside event data, SEVD includes RGB imagery, depth maps, optical flow, semantic segmentation, and instance segmentation, providing a comprehensive understanding of the scene.

## Getting Started

To generate the dataset, please follow these steps:

1. Install CARLA by following the instructions provided in the [CARLA Quick Start Guide](https://carla.readthedocs.io/en/latest/start_quickstart/).
2. We have utilized CARLA Version 0.9.15 and Version 0.9.14. Download and install them from the following links:
   - [CARLA Version 0.9.15](https://carla.org/2023/11/10/release-0.9.15/)
   - [CARLA Version 0.9.14](https://carla.org/2022/12/23/release-0.9.14/)
3. During experimentation, it was found that CARLA Version 0.9.14 does not support bounding boxes on 2 wheelers. Hence, it is recommended to use Version 0.9.15.

## Configuration

### Fixed Perception

- Set the coordinates of the sensors for fixed perception [here](https://github.com/eventbasedvision/SEVD/blob/main/carla/config/sensors-cordinates-fixed-perception.json).
- Define sensors and their attributes [here](https://github.com/eventbasedvision/SEVD/blob/main/carla/config/sensors-fixed-perception.json).

### Ego Perception

- Define sensors, their attributes, and their position relative to the ego vehicle [here](https://github.com/eventbasedvision/SEVD/blob/main/carla/config/sensors.json).

## Command-Line Arguments

The following command-line arguments are available to customize the behavior of your application:

- `--host, -H`: Specifies the IP of the host server. Default value is 127.0.0.1.
- `--port, -p`: Specifies the TCP port to listen to. Default value is 2000.
- `--timeout, -t`: Sets the timeout (in seconds) while trying to establish a connection to the CARLA server. Default value is 10.
- `--map, -M`: Sets the initial map for the application. Default value is "Town03".
- `--number-of-vehicles, -n`: Specifies the number of vehicles to spawn. Default value is 10.
- `--number-of-walkers, -w`: Specifies the number of pedestrians (walkers) to spawn. Default value is 50.
- `--tm-port`: Specifies the port to communicate with TM (Traffic Manager). Default value is 8000.
- `--sync`: When provided, this flag enables synchronous mode execution.
- `--delta-seconds`: Sets the delta seconds between frames. Default value is 0.1. More info [here](https://carla.readthedocs.io/en/latest/adv_synchrony_timestep/).
- `--ignore-first-n-ticks`: Ignores the first n ticks in the simulation. Default value is 60.
- `--duration`: Duration of the simulation / Number of frames.
- `--start-weather`: Start weather of the simulation. Default value is ClearNoon.
- `--end-weather`: End weather of the simulation. Default value is ClearNoon. If start != end, a linear extrapolation is performed to get the intermediate states.

## Sample Command

```bash
python main.py --number-of-ego-vehicles=1 -n=120 -w=70 --sync --delta-seconds=0.1 --timeout=60 --ignore-first-n-ticks=35 --duration=9000 --start-weather=ClearNoon --end-weather=ClearNight
```
